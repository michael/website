<!DOCTYPE html><html><head>
        <title>Learning Docker through Dockter : Stencila</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" type="image/png" href="/img/favicon.png">
        

        <link rel="stylesheet" href="/css/stencila-website.css">
        <link rel="stylesheet" href="/css/fontawesome-all.min.css">
        
<link rel="stylesheet" href="/css/prism.css">

    </head>

    <body class="has-navbar-fixed-top has-navbar-fixed-top-touch" id="body">
        <header class="header">
    <nav class="navbar is-fixed-top border-bottom-light" role="navigation" aria-label="main navigation" id="main-navigation">
        <div class="container">
            <div class="navbar-brand">
                <a class="navbar-item navbar-logo" href="/"><img src="/img/stencila-logo.svg" width="140" alt="Stencila"></a>
                <div class="navbar-burger">
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                    <span aria-hidden="true"></span>
                </div>
            </div>
            <div class="navbar-menu">
                <div class="navbar-start flex-grow-contents flex-end">
                    <!-- <a class="navbar-item" href="/use">Use</a> -->
                    <a class="navbar-item" href="/learn/intro.html">Learn</a>
                    <a class="navbar-item" href="/contribute">Contribute</a>
                    <a class="navbar-item" href="/community">Community</a>
                </div>

                <div class="navbar-end">
                    <div class="navbar-item">
                        <a class="button is-primary is-rounded" href="/#beta-signup">
                            <strong>Sign Up</strong>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</header>

        
<main class="section">
    <div class="container">
        <div class="columns is-centered">
            <div class="column is-8 posts">
                <article>
                    <header class="heading">
                        <p class="has-text-primary small">Aleksandra Pawlik, 5 March 2019</p>
                        <h1 class="title has-line has-text-primary is-1">Learning Docker through Dockter</h1>
                    </header>
                    <div class="content post-article-content"><p>This is a short summary of my, somewhat painful, route to discovering that what I thought I knew about Docker was in fact just the tip of the iceberg. Fortunately, I was able to upgrade my understanding through testing and using a new tool we have been developing: <a href="https://stencila.github.io/dockter/">Dockter</a>,  a container image builder for researchers.</p>
<p>I used Docker for the first time several years ago when it entered the world of computational research. Working with computational research communities I was well aware of the problems with reproducibility due to dependency hell. Docker images appeared to be (and are!) a great solution. However, not actually doing
computational research myself, I only used Docker a couple of times following a tutorial to build an image just to see how it would go. It all went fine, as usually well prepared tutorials present the user with a typical and uncomplicated case. I have run several Docker images that I pulled from the Docker hub. That has also worked fine for me. And that was it, as far as it came to my hands-on experience with Docker.</p>
<p><img src="docker-error.png" alt="docker-error.png" style="width: 80%;"></p>
<p>Hence I was convinced that Docker is the silver bullet for the reproducibility problems in computational research. I happily recommended Docker to a number of researchers that I talked to and even to some developers who were struggling with dependency hell. It was only after I started helping with Stencila&apos;s Dockter that I understood how naive I was.</p>
<p>Firstly, I didn&apos;t realize that rebuilding images with Docker can take a long time even if you only changed a tiny bit in your Dockerfile. In most cases, it is a recommended practice to create Docker images with as few layers as possible. That means that making even small changes in the list of required packages in a Dockerfile can results in Docker reinstalling all the packages.</p>
<p>Really excited about a feature in Dockter which helps deal with that, I started trying it out with a few examples that I was hoping to publish as a part of a Stencila Dockter tutorial. Everything was working fine until one morning my Linux just refused to boot up. After a frustrating few hours of trying to fix the problem using <code>fdisk</code> (suspecting segmentation fault), I booted into Windows on my dual-boot machine to do actual work. The following day using Ubuntu Live USB I got into the Linux partition and discovered that it was pretty much full. My experiments with fast rebuilding Docker images with Dockter resulted in a massive pile of Docker images that filled up the disk and stopped it being able to boot.</p>
<p>That&apos;s the second lesson I learnt about Docker. Clean up your images regularly. They can take a lot of space. While obviously I suppose it wasn&apos;t much of an issue when I was trying out Docker writing Dockerfiles manually. Rebuilding images involved more effort and it made me think about deleting the old image before I built the new one. However, Dockter &quot;exacerbated&quot; the problem as all I had to do to rebuild images was to change the example code in R or Python and mindlessly re-run <code>dockter build</code>, resulting in even more Docker images.</p>
<p>Conscious of the problem I nuked all Docker images which I created with Dockter and successfully logged back into Linux. Still working on the Dockter tutorial, I wanted to be smarter and sometimes would just halt the building process through the ever convenient &quot;Ctrl+C&quot;. Due to the previous image disaster, I was monitoring how much the free space on my drive was shrinking and rather nervously listing the images on the disk. That&apos;s how I discovered <em>Docker dangling images</em>. I&apos;m not sure if it was me hitting &quot;Ctrl+C&quot; too much that caused but now I know how to <a href="https://docs.docker.com/engine/reference/commandline/system_prune/">purge all Docker images effectively</a>. It will bite me back one day but so far so good.</p>
<p>Would I still recommend Docker for reproducible research? Yes.</p>
<p>Docker makes reproducibility a lot easier if you can get the hang of installing the right packages. Using Dockter makes this a lot easier by automatically detecting the right packages to use, eliminating dependency hell. Just make sure to keep track of your disk space if you&apos;re building a lot of images!</p>
</div>
                </article>
                
                <div id="discourse-comments"></div>
            </div>
        </div>
    </div>
</main>

        <footer class="footer">
    <div class="container">
        <div class="columns footer-links is-centered">
            <div class="column is-2">
                <h4 class="title"> Tools </h4>
                <!-- <a href="/use">Use </a> <br /> -->
                <a href="/learn/intro.html"> Learn </a> <br>
                <a href="/learn/faq.html"> FAQ </a> <br>
            </div>
            <div class="column is-2">
                <h4 class="title"> Community </h4>
                <a href="/contribute"> Contribute </a> <br>
                <a href="/community/beta-testing.html"> Beta Testing </a> <br>
                <a href="/community/resources.html"> Resources </a> <br>
                <a href="/blog"> Blog </a> <br>
            </div>
            <div class="column is-2">
                <h4 class="title"> About </h4>
                <a href="/about/team.html">Team</a> <br>
                <a href="/about/advisory-board.html">Advisors</a> <br>
                <a href="/about/jobs">Jobs</a> <br>
            </div>
            <div class="column is-2">
                <h4 class="title"> Contact </h4>
                <a href="mailto:hello@stenci.la">Email </a> <br>
                <a href="https://twitter.com/stencila"> Twitter </a> <br>
                <a href="https://stencila.zulipchat.com/#narrow/stream/202396-community"> Zulip Chat </a> <br>
                <a href="https://community.stenci.la/"> Community Forum </a> <br>
            </div>
        </div>
    </div>

    <div class="footer-colophon">
        <div class="container">
            <div class="columns align-centre">
                <img src="/img/stencila-icon-reverse.svg" width="36" alt="Stencila" class="footer-logo">
                <div class="column footer-copyright no-flex-grow has-nowrap">
                    &#xA9; 2018-2019 Stencila <a href="https://github.com/stencila/website#contributors">contributors</a>
                </div>
                <div class="footer-social column flex-grow has-text-centered">
                    <a href="https://github.com/stencila" target="_blank" class="fab fa-github"></a>
                    <a href="https://gitter.im/stencila/stencila" target="_blank" class="fab fa-gitter"></a>
                    <a href="https://twitter.com/stencila" target="_blank" class="fab fa-twitter"></a>
                </div>
                <div class="column is-2 footer-buttons">
                    <a id="edit-page" class="button is-mini is-outlined is-white is-rounded call-to-action is-full-width" href="https://github.com/stencila/website/edit/master/src/blog/2019-02-28-learning-with-dockter/index.md" target="_blank" title="Edit this page">Edit</a>
                </div>
            </div>
        </div>
    </div>
</footer>

        

        <script type="text/javascript" src="/js/noframework.waypoints.js"></script>
        <script type="text/javascript" src="/js/stencila-website.js"></script>
        <script type="text/javascript" src="/js/beta-signup.js"></script>
        <script type="text/javascript" src="https://unpkg.com/reqwest@2.0.5/src/reqwest.js"></script>
        

<script type="text/javascript" src="/js/prism.js"></script>
<script type="text/javascript" src="/js/prism-bash.min.js"></script>
<script type="text/javascript" src="/js/prism-json.min.js"></script>
<script type="text/javascript" src="/js/prism-markdown.min.js"></script>
<script type="text/javascript" src="/js/prism-mini.js"></script>
<script type="text/javascript" src="/js/prism-python.min.js"></script>
<script type="text/javascript" src="/js/prism-r.min.js"></script>
<script type="text/javascript" src="/js/prism-sql.min.js"></script>

<script type="text/javascript">
    DiscourseEmbed = {
        discourseUrl: 'https://community.stenci.la/',
        discourseEmbedUrl: window.location.href,
        { %
            if front.forum_topic %
        }
        topicId: {
            {
                front.forum_topic
            }
        } { % endif %
        }
    };
    (function() {
        var d = document.createElement('script');
        d.type = 'text/javascript';
        d.async = true;
        d.src = DiscourseEmbed.discourseUrl + 'javascripts/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
    })();
</script>

    

</body></html>